import React, { useState, useEffect } from "react";
import cityData from "../data/city_data.json";
import calcultedData from "../data/calculater_data.json";
import { FaLeaf, FaChartLine, FaTools, FaBolt, FaMoneyBillWave } from "react-icons/fa";

const CalculaterContent = () => {
  const cities = [
    "Adana",
    "Adƒ±yaman",
    "Afyonkarahisar",
    "Aƒürƒ±",
    "Amasya",
    "Ankara",
    "Antalya",
    "Artvin",
    "Aydƒ±n",
    "Balƒ±kesir",
    "Bilecik",
    "Bing√∂l",
    "Bitlis",
    "Bolu",
    "Burdur",
    "Bursa",
    "√áanakkale",
    "√áankƒ±rƒ±",
    "√áorum",
    "Denizli",
    "Diyarbakƒ±r",
    "Edirne",
    "Elazƒ±ƒü",
    "Erzincan",
    "Erzurum",
    "Eski≈üehir",
    "Gaziantep",
    "Giresun",
    "G√ºm√º≈ühane",
    "Hakkari",
    "Hatay",
    "Isparta",
    "Mersin",
    "ƒ∞stanbul",
    "ƒ∞zmir",
    "Kars",
    "Kastamonu",
    "Kayseri",
    "Kƒ±rklareli",
    "Kƒ±r≈üehir",
    "Kocaeli",
    "Konya",
    "K√ºtahya",
    "Malatya",
    "Manisa",
    "Kahramanmara≈ü",
    "Mardin",
    "Muƒüla",
    "Mu≈ü",
    "Nev≈üehir",
    "Niƒüde",
    "Ordu",
    "Rize",
    "Sakarya",
    "Samsun",
    "Siirt",
    "Sinop",
    "Sivas",
    "Tekirdaƒü",
    "Tokat",
    "Trabzon",
    "Tunceli",
    "≈ûanlƒ±urfa",
    "U≈üak",
    "Van",
    "Yozgat",
    "Zonguldak",
    "Aksaray",
    "Bayburt",
    "Karaman",
    "Kƒ±rƒ±kkale",
    "Batman",
    "≈ûƒ±rnak",
    "Bartƒ±n",
    "Ardahan",
    "Iƒüdƒ±r",
    "Yalova",
    "Karab√ºk",
    "Kilis",
    "Osmaniye",
    "D√ºzce",
  ];

  const [selectedCity, setSelectedCity] = useState("");
  const [selectedHomeType, setSelectedHomeType] = useState("");
  const [selectedHours, setSelectedHours] = useState("");
  const [selectedDays, setSelectedDays] = useState("");
  const [selectedWorkers, setSelectedWorkers] = useState("");
  const [selectedWC, setSelectedWC] = useState("");
  const [selectedWCL, setSelectedWCL] = useState("");
  const [cost, setCost] = useState(null);
  const [results, setResults] = useState({});
  const [showResults, setShowResults] = useState(false);

  const generateOptions = (start, end) => {
    return Array.from({ length: end - start + 1 }, (_, i) => (
      <option key={i + start} value={i + start}>
        {i + start}
      </option>
    ));
  };

  useEffect(() => {
    if (selectedCity && selectedHomeType) {
      setCost(cityData[selectedHomeType][selectedCity]);
    } else {
      setCost(null);
    }
  }, [selectedCity, selectedHomeType]);

  const calculateResults = () => {
    if (!cost || !selectedDays || !selectedWorkers || !selectedHours) return;

    const savingsAmount = selectedDays * selectedWorkers * selectedHours * 4;
    const savingsValue =
      (cost * selectedDays * selectedWorkers * selectedHours * 4) / 1000;
    const filterCost = calcultedData["filter"] * selectedWCL;
    const electricityCost = calcultedData["electric"] * selectedWCL;
    const netProfit = savingsValue - (electricityCost + filterCost);

    setResults({
      savingsAmount,
      savingsValue,
      filterCost,
      electricityCost,
      netProfit,
    });

    setShowResults(true);
  };

  return (
    <div className="flex flex-col lg:flex-row lg:items-start w-full h-full justify-center lg:gap-8 p-4 lg:p-10">
      {/* Form B√∂l√ºm√º */}
      <div
        className={`bg-white p-6 rounded-lg shadow-lg transition-all duration-500 ease-in-out w-full lg:w-2/3`}
      >
        <h1 className="text-xl lg:text-2xl font-bold text-gray-800 mb-4 text-center lg:text-left">
          Tasarruf Hesaplama Aracƒ±
        </h1>
        <h2 className="text-sm lg:text-lg font-medium text-gray-600 mb-6 text-center lg:text-left">
          L√ºtfen bilgileri eksiksiz doldurunuz.
        </h2>

        <div className="space-y-4 lg:space-y-6">
          {/* ≈ûehir Se√ßimi */}
          <div>
            <label
              htmlFor="city"
              className="block text-sm font-medium text-gray-700 mb-2"
            >
              ≈ûehir Se√ßiniz
            </label>
            <select
              id="city"
              className="block w-full rounded-lg border-gray-300 bg-gray-100 text-gray-700 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-3 px-4"
              onChange={(e) => setSelectedCity(e.target.value)}
            >
              <option value="">Se√ßiniz</option>
              {cities.map((city) => (
                <option key={city} value={city}>
                  {city}
                </option>
              ))}
            </select>
          </div>

          {/* Hane T√ºr√º */}
          <div>
            <label
              htmlFor="homeType"
              className="block text-sm font-medium text-gray-700 mb-2"
            >
              Hane T√ºr√º Se√ßiniz
            </label>
            <select
              id="homeType"
              className="block w-full rounded-lg border-gray-300 bg-gray-100 text-gray-700 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-3 px-4"
              onChange={(e) => setSelectedHomeType(e.target.value)}
            >
              <option value="">Se√ßiniz</option>
              <option value="Devlet Dairesi">Devlet Dairesi</option>
              <option value="ƒ∞≈üyeri">ƒ∞≈üyeri</option>
              <option value="OBS">OSB</option>
            </select>
          </div>

          {/* Ayda Ka√ß G√ºn A√ßƒ±k */}
          <div>
            <label
              htmlFor="openDays"
              className="block text-sm font-medium text-gray-700 mb-2"
            >
              Ayda Ka√ß G√ºn A√ßƒ±k?
            </label>
            <select
              id="openDays"
              className="block w-full rounded-lg border-gray-300 bg-gray-100 text-gray-700 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-3 px-4"
              onChange={(e) => setSelectedDays(e.target.value)}
            >
              <option value="">Se√ßiniz</option>
              {generateOptions(20, 31)}
            </select>
          </div>

          {/* G√ºnde Ka√ß Saat */}
          <div>
            <label
              htmlFor="openHours"
              className="block text-sm font-medium text-gray-700 mb-2"
            >
              G√ºnde Ka√ß Saat?
            </label>
            <select
              id="openHours"
              className="block w-full rounded-lg border-gray-300 bg-gray-100 text-gray-700 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-3 px-4"
              onChange={(e) => setSelectedHours(e.target.value)}
            >
              <option value="">Se√ßiniz</option>
              {generateOptions(0, 24)}
            </select>
          </div>

          {/* Ka√ß Personel */}
          <div>
            <label
              htmlFor="personnel"
              className="block text-sm font-medium text-gray-700 mb-2"
            >
              Ka√ß Personel?
            </label>
            <input
              type="number"
              placeholder="Personel Sayƒ±sƒ±"
              id="personnel"
              className="block w-full rounded-lg border-gray-300 bg-gray-100 text-gray-700 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-3 px-4"
              onChange={(e) => setSelectedWorkers(e.target.value)}
            />
          </div>

          {/* Ka√ß Adet Tuvalet */}
          <div>
            <label
              htmlFor="toilets"
              className="block text-sm font-medium text-gray-700 mb-2"
            >
              Ka√ß Adet Tuvalet Mevcut?
            </label>
            <select
              id="toilets"
              className="block w-full rounded-lg border-gray-300 bg-gray-100 text-gray-700 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-3 px-4"
              onChange={(e) => setSelectedWC(e.target.value)}
            >
              <option value="">Se√ßiniz</option>
              {generateOptions(1, 25)}
            </select>
          </div>

          {/* Tuvaletteki Lavabolar Ka√ßlƒ± */}
          <div>
            <label
              htmlFor="lavabos"
              className="block text-sm font-medium text-gray-700 mb-2"
            >
              Tuvaletteki Lavabolar Ka√ßlƒ±?
            </label>
            <select
              id="lavabos"
              className="block w-full rounded-lg border-gray-300 bg-gray-100 text-gray-700 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-3 px-4"
              onChange={(e) => setSelectedWCL(e.target.value)}
            >
              <option value="">Se√ßiniz</option>
              {generateOptions(1, 20)}
            </select>
          </div>
        </div>

        <button
          className="mt-6 w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-lg shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2"
          onClick={calculateResults}
        >
          Hesapla
        </button>
      </div>

      {showResults && (
        <div className="bg-white p-6 rounded-lg shadow-lg transition-all duration-500 ease-in-out w-full lg:w-1/3 mt-6 lg:mt-0">
          <h1 className="font-bold text-xl lg:text-2xl text-blue-600 mb-4 lg:mb-6">
            üéâ KAZANCINIZ!
          </h1>
          <div className="space-y-4 lg:space-y-6">
            <div className="flex items-center gap-4">
              <FaLeaf className="text-green-500 text-3xl" />
              <div>
                <h2 className="font-semibold text-lg text-gray-800">
                  Tasarruf Miktarƒ±
                </h2>
                <p className="text-gray-600 text-base">
                  Aylƒ±k: {results.savingsAmount.toFixed(2)} Litre <br />
                  Yƒ±llƒ±k: {(results.savingsAmount * 12).toFixed(2)} Litre
                </p>
              </div>
            </div>

            <div className="flex items-center gap-4">
              <FaChartLine className="text-yellow-500 text-3xl" />
              <div>
                <h2 className="font-semibold text-lg text-gray-800">
                  Tasarruf Tutarƒ±
                </h2>
                <p className="text-gray-600 text-base">
                  Aylƒ±k: {results.savingsValue.toFixed(2)} ‚Ç∫ <br />
                  Yƒ±llƒ±k: {(results.savingsValue * 12).toFixed(2)} ‚Ç∫
                </p>
              </div>
            </div>

            <div className="flex items-center gap-4">
              <FaTools className="text-red-500 text-3xl" />
              <div>
                <h2 className="font-semibold text-lg text-gray-800">
                  Filtre Maliyeti
                </h2>
                <p className="text-gray-600 text-base">
                  Aylƒ±k: {results.filterCost.toFixed(2)} ‚Ç∫ <br />
                  Yƒ±llƒ±k: {(results.filterCost * 12).toFixed(2)} ‚Ç∫
                </p>
              </div>
            </div>

            <div className="flex items-center gap-4">
              <FaBolt className="text-indigo-500 text-3xl" />
              <div>
                <h2 className="font-semibold text-lg text-gray-800">
                  Elektrik Maliyeti
                </h2>
                <p className="text-gray-600 text-base">
                  Aylƒ±k: {results.electricityCost.toFixed(2)} ‚Ç∫ <br />
                  Yƒ±llƒ±k: {(results.electricityCost * 12).toFixed(2)} ‚Ç∫
                </p>
              </div>
            </div>

            <div className="flex items-center gap-4">
              <FaMoneyBillWave className="text-green-600 text-3xl" />
              <div>
                <h2 className="font-semibold text-lg text-gray-800">
                  Net Kazan√ß Tutarƒ±
                </h2>
                <p className="text-gray-600 text-base">
                  Aylƒ±k: {results.netProfit.toFixed(2)} ‚Ç∫ <br />
                  Yƒ±llƒ±k: {(results.netProfit * 12).toFixed(2)} ‚Ç∫
                </p>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default CalculaterContent;
